{% load static %}
{% load humanize %}
{% load filters %}
<!DOCTYPE html>
<html>
<head>
<title>Think Package Purchase Order</title>
    <style type="text/css">
/* Reset CSS. http://yui.yahooapis.com/3.2.0/build/cssreset/reset-min.css  */
html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,
pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}
table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,
cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal;}li{list-style:none;}
caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}
q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}
sup{vertical-align:text-top;}sub{vertical-align:text-bottom;}input,textarea,
select{font-family:inherit;font-size:inherit;font-weight:inherit;}input,textarea,
select{*font-size:100%;}legend{color:#000;}

/* Your Base Foundation */
html,body { font-family: sans-serif; font-size:12px; }
h1 { font-size:18px; }
h2 { font-size:16px; }
h3 { font-size:14px; }
h4 { font-size:12px; }
strong { font-weight:900 !important; }
hr     { border:0; margin:0; padding:0; height:1px; color:#000; background-color:#000; }

/* Page Breaks */
.pb_before { page-break-before:always !important; }
.pb_after  { page-break-after:always !important; }
.pbi_avoid { page-break-inside:avoid !important; }

body {
        font-size: 10px;
        font-family: sans-serif;
}

#box {
	width: 8.5 in;
	height: 5.5 in;
	border: 1px dashed #888888;
	margin: 1em;
	padding: 0.5em;
	height: 6em;
	position: relative;
	background: url('../images/tp.png') no-repeat;
}

div.box {
	border: 1px solid #000;
	padding: 5px;
}

#blurb {
	width: 15em;
}

#img_barcode {
	position: absolute;
	left: 16.5em;
	//top: 0.5em;
	width: 200px;
	height: 200px;
	z-index: 2;
}

h3 {
	font-size: 18px;
	font-family: 'Helvetica', 'Arial', sans-serif;
	font-weight: normal;
}

h4 {
	font-size: 16px;
	font-family: 'Helvetica', 'Arial', sans-serif;
	font-weight: normal;
}

small {
	font-size: 12px;
	font-family: 'Helvetica', 'Arial', sans-serif;
}

img.logo {
	width: 240px;
}

.floatright {
	float: right;
}
.ship-date {
	white-space: nowrap;
}

.topwarning {
	font-size: 20px;
	font-weight: normal;
}

.mediumfine {
	font-size: 7px;
}
.fine {
	font-size: 5px;
}

p.mediumfine {
	margin: 0px;
}

.logo_address {
	margin-left: 7px;
}

div.textblock {
	position: absolute;
}

#shipper {
	left: 15px;
	top: 73px;
}

#consignee {
	left: 490px;
	top: 73px;
}

#ship_date {
	left: 260px;
	top: 73px;
}

#shipper_address {
	left: 45px;
	top: 85px;
}

#consignee_address {
	left: 445px;
	top: 85px;
	font-size: 16px;
}

#carrier {
	left: 95px;
	top: 173px;
}

#requirements {
	margin-top: 10px;
	width: 200px;
}
#requirements p {
	font-size: 10px;
	margin: 20px;
	line-height: 18px;
}

div.pagecount {
	float: right;
	font-size: 8px;
	width: 60px;
	padding: 3px;
}

table.shipping-info {
	width: 100%;
	font-size: 14px;
	border-spacing: 0px;
}
table.shipping-info td {
	padding: 3px;
	vertical-align: top;
	border-style: solid;
	border-color: #000;
	border-width: 1px;
}

.items-table {
	width: 100%;
	font-size: 14px;
	border-spacing: 0px;
	border: 1px solid #000;
}
.items-table td {
	padding: 3px;
}
table.items-table th {
	font-size: 10px;
	font-weight: normal;
	padding: 3px;
	border-bottom: 1px solid #000;
	text-align: center;
}
.items-table td,
.items-table th {
	border: 1px solid #aaa;
}
.items-table th {
	border-top: 1px solid #000;
}
.items-table td:first-child,
.items-table th:first-child {
	border-left: 1px solid #000;
}
.items-table td:last-child,
.items-table th:last-child {
	border-right: 1px solid #000;
}
.items-table tr:last-child td {
	border-bottom: 1px solid #000;
}
.items-table .line_no {
    width: 40px;
    text-align: right;
}
.items-table .client_id {
}
.items-table .item_no {
    width: 60px;
}
.items-table .item_descr {
}
.items-table .packing {
	width: 100px;
	text-align: right;
}
.items-table .no_cases {
	width: 60px;
	text-align: right;
}
.items-table .unit_price {
    text-align: right;
}
.items-table .case_price {
    text-align: right;
}
.items-table .net_amount {
    width: 70px;
    text-align: right;
}

div.special_instructions {
	width: 100%;
	height: 70px;
	font-size: 10px;
	font-weight: bold;
}
div.special_instructions_header {
	font-size: 12px;
	margin-top: 5px;
}

.recvhours {
	margin-left: 20px;
	margin-top: 0px;
	margin-bottom: 10px;
}

td.label {
	text-align: right;
	width: 30px;
}

p.box_inner_heading {
	font-size: 8px;
}

span.underline {
	text-decoration: underline;
	font-family: monospace;
}

table.signatures {
	width: 100%;
}
table.signatures td {
	border: none;
	height: 30px;
	font-size: 12px;
}
table.signatures input {
	border-color: #000;
	border-style: solid;
	border-width: 0px 0px 1px 0px;
	width: 90%;
}
.signature-input {
	width: 350px;
}

p.total {
	width: 180px;
	float: left;
}

.totals {
	margin: 5px 0px 40px 0px;
}
.total.total-cases {
	width: 130px;
}
.total.total-pallets {
	width: 170px;
}
.total.total-class {
	width: 350px;
}
.total.total-pieces {
	width: 150px;
}
.total.total-weight {
	width: 150px;
}

td.label {
	width: 30%;
}

.requirements {
	font-weight: bold;
}
.requirements p {
	line-height: 15px;
}
.requirements .checkbox {
	font-size: 28px;
	vertical-align: middle;
	background-image: url('{% static "images/checkbox_unchecked.png" %}');
	background-size: cover;
	width: 18px;
	height: 18px;
	display: inline-block;
}
.requirements .checkbox.checked {
	background-image: url('{% static "images/checkbox_checked.png" %}');
}
    </style>
</head>

<body>

{% if invq_transactions.count == 0 %}
Cannot produce purchase order; no INVQ products in this shipment.
{% endif %}

{% for page in pages %}

<div class="floatright">
    <div class="topwarning">
        PURCHASE ORDER
    </div>

    Expected Delivery Date: ASAP
</div>

<div class="pagecount">
Page {{ forloop.counter }} of {{ total_pages }}
</div>

<br clear="right">

<div class="floatright">
    <table class="shipping-info" style="width: 400px; margin-top: 20px;">
    <tr>
        <td class="label">Vendor</td>
        <td class="right_col">THINKPACKAGE</td>
    </tr>
    <tr>
        <td class="label">Phone</td>
        <td class="right_col">212-229-0700</td>
    </tr>
    <tr>
        <td class="label">Fax</td>
        <td class="right_col">212-229-0703</td>
    </tr>
    <tr>
        <td class="label">Email</td>
        <td class="right_col">delivery@thinkpackage.com</td>
    </tr>
    <tr>
        <td class="label bottom_row">Corporate Office</td>
        <td class="right_col bottom_row">
            20 W 22nd Street<br />
            Suite 615<br />
            New York, NY 10010<br />
        </td>
    </tr>
</table>

</div>

<br />
<table class="shipping-info" cellspacing="0" style="width: 400px;">
    <tr>
        <td class="label">PO #</td>
        <td class="right_col">PO-{{ shipment.id }}</td>
    </tr>
    <tr>
        <td class="label">PO Date</td>
        <td class="right_col">{{ shipment.date_created|date:"SHORT_DATE_FORMAT" }}</td>
    </tr>
    <tr>
        <td class="label">PO Ship Date</td>
        <td class="right_col">{{ shipment.date_shipped|date:"SHORT_DATE_FORMAT" }}</td>
    </tr>
    <tr>
        <td class="label bottom_row">DL #</td>
        <td class="right_col bottom_row">{{ shipment.id }}</td>
    </tr>
</table>

<table class="shipping-info" cellspacing="0" style="width: 400px; margin-top: 20px;">
    <tr>
        <td class="label">Client</td>
        <td class="right_col">{{ shipment.client.company_name }}</td>
    </tr>
    <tr>
        <td class="label">Contact</td>
        <td class="right_col">{{ shipment.location.customer_contact }}</td>
    </tr>
    <tr>
        <td class="label">Phone</td>
        <td class="right_col">{{ shipment.location.customer_contact.phone_number }}</td>
    </tr>
    <tr>
        <td class="label">Email</td>
        <td class="right_col">{{ shipment.location.customer_contact.email }}</td>
    </tr>
    <tr>
        <td class="label bottom_row">Ship To Location</td>
        <td class="right_col bottom_row">
            {{ shipment.location.address }}<br />
            {% if shipment.location.address_2 %}{{ shipment.location.address_2 }}<br />{% endif %}
            {{ shipment.location.city }}, {{ shipment.location.state }} {{ shipment.location.postal_code }}<br />
            {% if shipment.location.country and shipment.location.country.code != 'US' %}
                {{ shipment.location.country.name }}<br />
            {% endif %}
        </td>
    </tr>
</table>


<br />

<table class="items-table" style="margin-top: 30px; border: 1px solid ##000;">
<tr>
    <th class="line_no">Line #</th>
    <th class="client_id">Client ID</th>
    <th class="item_no">Item #</th>
    <th class="item_descr">Description</th>
    <th class="packing">Packing/cs</th>
    <th class="no_cases">Quantity (cs)</th>
    <th class="unit_price">Unit Price</th>
    <th class="case_price">Case Price</th>
    <th class="net_amount">Amount (Net)</th>
</tr>

{% with page=forloop.counter pagestart=forloop.counter0|multiply:max_products_per_page pageend=forloop.counter|multiply:max_products_per_page %}
{% for transaction in shipment.transaction_set.all %}
    {% if forloop.counter0 >= pagestart and forloop.counter0 < pageend %}

    <tr>
        <td class="line_no">{{ forloop.counter }}</td>
        <td class="client_id">{{ shipment.client.company_name }}</td>
        <td class="item_no">{{ transaction.product.item_number }}</td>
        <td class="item_descr">{{ transaction.product.name|truncatechars:72 }}
            <span class="account-label">[{{ transaction.product.get_accounting_prepay_type_display }}]</span>
        </td>
        <td class="packing">{{ transaction.product.packing|intcomma }}</td>
        <td class="no_cases">{{ transaction.cases|intcomma }}</td>
        <td class="unit_price">${{ transaction.product.unit_price }}</td>
        <td class="case_price">${{ transaction.product.case_price|floatformat:2 }}</td>
        <td class="net_amount">${{ transaction.total_price|floatformat:2 }}</td>
    </tr>

    {% endif %}
{% endfor %}
{% endwith %}

{% if forloop.counter == total_pages %}
{% for blank_row in remainder_rows %}
    <tr>
        <td class="line_no">&nbsp;</td>
        <td class="client_id">&nbsp;</td>
        <td class="item_no">&nbsp;</td>
        <td class="item_descr">&nbsp;</td>
        <td class="packing">&nbsp;</td>
        <td class="no_cases">&nbsp;</td>
        <td class="unit_price">&nbsp;</td>
        <td class="case_price">&nbsp;</td>
        <td class="net_amount">&nbsp;</td>
    </tr>
{% endfor %}
{% endif %}

        <tr class="totals">
        <td class="line_no">&nbsp;</td>
        <td class="client_id">&nbsp;</td>
        <td class="item_no">&nbsp;</td>
        <td class="item_descr">&nbsp;</td>
        <td class="packing">Total Cases:</td>
        <td class="no_cases">{{ shipment.total_cases }}</td>
        <td class="unit_price">&nbsp;</td>
        <td class="case_price">Order Total:</td>
        <td class="net_amount">${{ shipment.total_price|floatformat:2 }}</td>
    </tr>

</table>

<div class="floatright">
<table class="floatright1 shipping-info" cellspacing="0" style="width: 420px; margin-top: 30px;">
    <tr>
        <td class="label">Client PO</td>
        <td class="right_col">{{ shipment.carrier }}</td>
    </tr>
    <tr>
        <td class="label">Total Weight</td>
        <td class="right_col">{{ shipment.total_weight_imperial|floatformat:1 }} lbs</td>
    </tr>
    <tr>
        <td class="label">Total Pallets</td>
        <td class="right_col">{{ shipment.pallet_count|default_if_none:'' }}</td>
    </tr>
    <tr>
        <td class="label">PRO / Tracking #</td>
        <td class="right_col">{{ shipment.pro_number }}</td>
    </tr>
    <tr>
        <td class="label bottom_row">Delivery Charge</td>
        <td class="right_col bottom_row">{% if shipment.delivery_charge %}${{ shipment.delivery_charge|floatformat:2 }}{% endif %}</td>
    </tr>
</table>

{% if forloop.counter < total_pages %}
<p class="pb_after"></p>
{% endif %}
{% endfor %}


</body>
</html>
